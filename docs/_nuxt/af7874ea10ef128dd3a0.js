(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{730:function(t,n,e){var content=e(734);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(110).default)("4aed7555",content,!0,{sourceMap:!1})},733:function(t,n,e){"use strict";var r=e(730);e.n(r).a},734:function(t,n,e){(t.exports=e(109)(!1)).push([t.i,".card[data-v-0ef3c6a1]{width:200px;height:230px}",""])},738:function(t,n,e){"use strict";e(15),e(50),e(12),e(83),e(8);var r={name:"AuctionList",props:{tons:{type:Array,default:function(){return[]}},fields:{type:Object,default:function(){return{thumb:{label:"",class:"p-0"},id:{label:"Id"},price:{label:"Price"},seller:{label:"Seller"}}}}},data:function(){return{}},watch:{},mounted:function(){},methods:{}},o=e(49),c=Object(o.a)(r,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"overflow-auto"},[e("b-table",{attrs:{striped:"",hover:"",items:t.tons,fields:t.fields},scopedSlots:t._u([{key:"thumb",fn:function(data){return[e("img",{staticStyle:{height:"45px"},attrs:{src:data.item.imgSrc}})]}},{key:"id",fn:function(data){return[data.value?e("nuxt-link",{attrs:{to:{name:"ton",params:{tokenId:data.value}}}},[t._v(t._s(data.value))]):t._e()]}},{key:"seller",fn:function(data){return[data.value?e("nuxt-link",{attrs:{to:{name:"ownership",params:{address:data.value}}}},[t._v(t._s(data.value))]):t._e()]}}])})],1)},[],!1,null,"f78d7948",null).exports,l={name:"AuctionCard",props:{tons:{type:Array,default:function(){return[]}}},data:function(){return{ton:{}}},watch:{},mounted:function(){},methods:{}},d=(e(733),{name:"Auction",components:{AuctionList:c,AuctionCard:Object(o.a)(l,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex flex-wrap"},[t._l(t.tons,function(n){return[n.shown?e("div",{key:n.id,staticClass:"card"},[e("div",{staticClass:"p-3 position-absolute"},[e("nuxt-link",{attrs:{to:"/ton/"+n.tokenId}},[t._v(t._s(n.tokenId))])],1),e("img",{staticClass:"w-100",attrs:{src:n.imgSrc}})]):t._e()]})],2)},[],!1,null,"0ef3c6a1",null).exports},props:{name:{type:String,default:function(){return""}},page:{type:Number,default:function(){return 1}},type:{type:String,default:function(){return"card"}},contract:{type:String,default:function(){return""}}},data:function(){return{perPage:50,currentPage:1,rows:0,tokensId:[],currentTab:"Card",tabs:["Card","List"],partTons:[],tons:[],tonsLoaded:!1,inputPage:""}},computed:{currentTabComponent:function(){return"Auction".concat(this.currentTab)}},watch:{page:{handler:function(t){0!==this.rows&&(this.currentPage=t,this.calcTokensId())}},type:{handler:function(t){this.currentTab="card"===t?"Card":"List"}},tokensId:{handler:function(){this.updatePartTons()}},partTons:{handler:function(){this.updateTons()}}},mounted:function(){var t=this;this.currentTab="card"===this.type?"Card":"List",this.$store.state.totalSupply.then(function(n){t.rows=n,t.$nextTick(function(){t.currentPage=t.page}),t.calcTokensId()})},methods:{calcTokensId:function(){var t=this.rows-this.perPage*(this.currentPage-1);this.tokensId=[];for(var n=[],i=0;i<this.perPage&&!(t-i<1);i+=1)n.push(t-i);this.tokensId=n},updatePartTons:function(){var t=this;this.partTons=this.tokensId.map(function(n){return{id:n,tokenId:n,imgSrc:t.$tonImg(n),getAuction:t.$contracts[t.contract].methods.getAuction(n).call(),getCurrentPrice:t.$contracts[t.contract].methods.getCurrentPrice(n).call()}})},updateTons:function(){var t=this;this.tonsLoaded=!1,this.tons=this.partTons.map(function(t){return{id:t.id,tokenId:t.tokenId,imgSrc:t.imgSrc}});var n=[];this.partTons.map(function(e,r){var o=e.getCurrentPrice.then(function(n){if(e.id===t.tons[r].id){var o=t.tons.slice();o[r].price=n,t.tons=o}}).catch(function(){(console.log("not in auction",e.id),e.id===t.tons[r].id)&&(t.tons.slice()[r].price="-")}),c=e.getAuction.then(function(n){if(e.id===t.tons[r].id){var o=t.tons.slice();o[r].seller=n.seller,o[r].startingPrice=n.startingPrice,o[r].endingPrice=n.endingPrice,o[r].duration=n.duration,o[r].startedAt=n.startedAt,o[r].shown=!0,t.tons=o}}).catch(function(){if(console.log("not in auction",e.id),e.id===t.tons[r].id){var n=t.tons.slice();n[r].hidden=!0,n[r].seller="-"}});return n.push(o,c),Promise.all(n).then(function(){t.tonsLoaded=!0}),!0})},tabClick:function(t){this.currentTab=t,this.$store.dispatch("doUpdateType",t.toLowerCase()),this.$router.push({name:this.name,params:{type:t.toLowerCase()}})},onPageChange:function(t){this.$router.push({name:this.name,params:{page:t}})},goPage:function(){var t=Number(this.inputPage);this.$router.push({name:this.name,params:{page:t}})}}}),h=Object(o.a)(d,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{staticClass:"form-inline float-sm-right"},[e("b-input-group",[e("b-form-input",{attrs:{name:"inputPage",type:"number",placeholder:"Page No."},model:{value:t.inputPage,callback:function(n){t.inputPage=n},expression:"inputPage"}}),e("b-input-group-append",[e("b-button",{attrs:{text:"Go",variant:"primary"},on:{click:t.goPage}},[t._v("Go")])],1)],1)],1),e("b-pagination",{attrs:{"aria-controls":"tons",limit:"10","total-rows":t.rows,"per-page":t.perPage},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(n){t.currentPage=n},expression:"currentPage"}}),e("b-nav",{attrs:{tabs:""}},[t._l(t.tabs,function(n){return[e("b-nav-item",{attrs:{active:t.currentTab===n},on:{click:function(e){return t.tabClick(n)}}},[t._v(t._s(n))])]}),e("li",{staticClass:"nav-item"},[e("div",{staticClass:"px-3 py-2"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tonsLoaded,expression:"!tonsLoaded"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])])])])],2),e("section",{staticClass:"mb-5",attrs:{id:"tons"}},[e(t.currentTabComponent,{tag:"component",attrs:{tons:t.tons}})],1),e("b-pagination",{attrs:{"aria-controls":"tons",limit:"10","total-rows":t.rows,"per-page":t.perPage},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(n){t.currentPage=n},expression:"currentPage"}})],1)},[],!1,null,null,null);n.a=h.exports},752:function(t,n,e){"use strict";e.r(n);e(8);var r={name:"Shop",components:{Auction:e(738).a},props:{page:{type:Number,default:function(){return 1}},type:{type:String,default:function(){return"card"}}},data:function(){return{}},computed:{},watch:{},mounted:function(){},methods:{}},o=e(49),component=Object(o.a)(r,function(){var t=this.$createElement,n=this._self._c||t;return n("main",{staticClass:"container"},[n("h1",{staticClass:"display-3 mb-4"},[n("nuxt-link",{staticClass:"text-decoration-none",attrs:{to:"/shop"}},[this._v("Shop")])],1),n("Auction",{attrs:{page:this.page,type:this.type,name:"shop",contract:"AuctionSell"}})],1)},[],!1,null,null,null);n.default=component.exports}}]);