(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{731:function(t,n,e){var content=e(736);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(110).default)("592db1a6",content,!0,{sourceMap:!1})},735:function(t,n,e){"use strict";var r=e(731);e.n(r).a},736:function(t,n,e){(t.exports=e(109)(!1)).push([t.i,".card[data-v-706d0b09]{width:200px;height:230px}",""])},739:function(t,n,e){"use strict";var r=e(0),o=e(144),c={name:"EntityList",props:{fields:{type:Object,default:function(){return{thumb:{label:"",class:"p-0"},id:{label:"Id"},generation:{label:"Gen"},birthTime:{label:"BirthTime (JST)"},owner:{label:"Owner"}}}}},data:function(){return{}},computed:Object(r.a)({},Object(o.b)("tons",["currentTons","asyncTonsCache"])),mounted:function(){},methods:{}},d=e(49),component=Object(d.a)(c,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"overflow-auto"},[e("b-table",{attrs:{striped:"",hover:"",items:t.currentTons,fields:t.fields},scopedSlots:t._u([{key:"thumb",fn:function(data){return[e("img",{staticStyle:{height:"45px"},attrs:{src:data.item.imgSrc}})]}},{key:"id",fn:function(data){return[e("nuxt-link",{attrs:{to:"/ton/"+data.value}},[t._v(t._s(data.value))])]}},{key:"generation",fn:function(data){return[t.asyncTonsCache.find(function(t){return t.id===data.item.id})?e("span",["0"===t.asyncTonsCache.find(function(t){return t.id===data.item.id}).generation?[e("span",[t._v(t._s(t.asyncTonsCache.find(function(t){return t.id===data.item.id}).generation))])]:[e("nuxt-link",{attrs:{to:"/tree/"+data.item.id}},[t._v(t._s(t.asyncTonsCache.find(function(t){return t.id===data.item.id}).generation))])]],2):t._e()]}},{key:"birthTime",fn:function(data){return[t.asyncTonsCache.find(function(t){return t.id===data.item.id})?e("span",[e("span",[t._v(t._s(t.$unixtimeFormat(t.asyncTonsCache.find(function(t){return t.id===data.item.id}).birthTime)))])]):t._e()]}},{key:"owner",fn:function(data){return[t.asyncTonsCache.find(function(t){return t.id===data.item.id})?e("span",[e("nuxt-link",{attrs:{to:"/ownership/"+t.asyncTonsCache.find(function(t){return t.id===data.item.id}).owner}},[t._v(t._s(t.asyncTonsCache.find(function(t){return t.id===data.item.id}).owner))])],1):t._e()]}}])})],1)},[],!1,null,"542e011a",null);n.a=component.exports},740:function(t,n,e){"use strict";var r=e(0),o=e(144),c={name:"EntityCard",data:function(){return{}},computed:Object(r.a)({},Object(o.b)("tons",["currentTons"])),watch:{},mounted:function(){},methods:{}},d=(e(735),e(49)),component=Object(d.a)(c,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"d-flex flex-wrap"},[t._l(t.currentTons,function(n){return[e("div",{key:n.id,staticClass:"card"},[e("div",{staticClass:"p-3 position-absolute"},[e("nuxt-link",{attrs:{to:"/ton/"+n.id}},[t._v(t._s(n.id))])],1),e("img",{staticClass:"w-100",attrs:{src:n.imgSrc}})])]})],2)},[],!1,null,"706d0b09",null);n.a=component.exports},749:function(t,n,e){"use strict";e.r(n);e(82);var r=e(21),o=(e(8),e(739)),c=e(740),d={name:"Ownership",components:{EntityList:o.a,EntityCard:c.a},props:{address:{type:String,default:function(){return""}},type:{type:String,default:function(){return"card"}},page:{type:Number,default:function(){return 1}}},data:function(){return{perPage:50,currentPage:1,allTokensId:[],tokensId:[],currentTab:"Card",tabs:["Card","List"],partTons:[],tons:[],lastMod:"",inputAddress:"",fields:{thumb:{label:"",class:"p-0"},id:{label:"id"},generation:{label:"gen"},birthTime:{label:"birthTime"},breederId:{label:"breederId"},seederId:{label:"seederId"}}}},computed:{currentTabComponent:function(){return"Entity".concat(this.currentTab)},rows:function(){return this.allTokensId.length}},watch:{page:{handler:function(t){0!==this.rows&&(this.currentPage=t,this.calcTokensId())}},address:{handler:function(){this.getTokensId()}},type:{handler:function(t){this.currentTab="card"===t?"Card":"List"}},tokensId:{handler:function(){this.updatePartTons()}},partTons:{handler:function(){this.updateTons()}}},mounted:function(){var t=this;this.currentTab="card"===this.type?"Card":"List",this.getTokensId(),this.$nextTick(function(){t.currentPage=t.page})},methods:{getTokensId:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var n,e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$axios.get("https://cryptoinkexplorer.blob.core.windows.net/api/v1/block.json").then(function(t){e.lastMod="Last Modified: ".concat(t.data.block)}),t.next=3,this.$axios.get("https://cryptoinkexplorer.blob.core.windows.net/api/v1/ownertotokens/".concat(this.address.toLowerCase(),".json"));case 3:n=t.sent,this.allTokensId=n.data.reverse(),this.$nextTick(function(){e.currentPage=e.page}),this.calcTokensId();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),calcTokensId:function(){var a=(this.page-1)*this.perPage,t=a+this.perPage;this.tokensId=this.allTokensId.slice(a,t)},updatePartTons:function(){var t=this;this.partTons=this.tokensId.map(function(n){return{id:n,tokenId:n,imgSrc:t.$tonImg(n),getEntity:t.$contracts.EntityCore.methods.getEntity(n).call(),ownerOf:t.$contracts.EntityCore.methods.ownerOf(n).call()}})},updateTons:function(){var t=this;this.tons=this.partTons.map(function(t){return{id:t.id,tokenId:t.tokenId,imgSrc:t.imgSrc}}),this.partTons.map(function(n,e){return n.ownerOf.then(function(r){if(t.tons[e]&&n.id===t.tons[e].id){var o=t.tons.slice();o[e].owner=r,t.tons=o}}),n.getEntity.then(function(r){if(t.tons[e]&&n.id===t.tons[e].id){var o=t.tons.slice();o[e].isBreeding=r.isBreeding,o[e].isReady=r.isReady,o[e].cooldownIndex=r.cooldownIndex,o[e].nextActionAt=r.nextActionAt,o[e].matingWithId=r.matingWithId,o[e].birthTime=r.birthTime,o[e].breederId=r.breederId,o[e].seederId=r.seederId,o[e].generation=r.generation,o[e].dna=t.$web3.utils.toHex(r.dna),t.tons=o}}),!0})},tabClick:function(t){this.currentTab=t,this.$store.dispatch("doUpdateType",t.toLowerCase()),this.$router.push({name:"ownership",params:{type:t.toLowerCase()}})},onPageChange:function(t){this.$router.push({name:"ownership",params:{page:t}})},goAddress:function(){this.$router.push({name:"ownership",params:{address:this.inputAddress}})}}},l=e(49),component=Object(l.a)(d,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("main",{staticClass:"container position-relative"},[e("div",{staticClass:"position-absolute",staticStyle:{top:"0",right:"0"}},[e("small",[t._v(t._s(t.lastMod))])]),e("h1",{staticClass:"display-3 mb-4"},[e("nuxt-link",{staticClass:"text-decoration-none",attrs:{to:"/ownership"}},[t._v("Ownership")])],1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6"},[e("p",[e("strong",[t._v("Address Â ")]),e("span",[t._v(t._s(t.address))])])]),e("div",{staticClass:"col-12 col-sm-6"},[e("b-input-group",[e("b-form-input",{attrs:{name:"inputAddress",type:"text",placeholder:"Address"},model:{value:t.inputAddress,callback:function(n){t.inputAddress=n},expression:"inputAddress"}}),e("b-input-group-append",[e("b-button",{attrs:{text:"Go",variant:"primary"},on:{click:t.goAddress}},[t._v("Go")])],1)],1)],1)]),e("b-pagination",{attrs:{"aria-controls":"tons",limit:"10","total-rows":t.rows,"per-page":t.perPage},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(n){t.currentPage=n},expression:"currentPage"}}),e("b-nav",{attrs:{tabs:""}},[t._l(t.tabs,function(n){return[e("b-nav-item",{attrs:{active:t.currentTab===n},on:{click:function(e){return t.tabClick(n)}}},[t._v(t._s(n))])]})],2),e("section",{attrs:{id:"tons"}},[e(t.currentTabComponent,{tag:"component",attrs:{tons:t.tons,fields:t.fields}})],1),e("b-pagination",{attrs:{"aria-controls":"tons",limit:"10","total-rows":t.rows,"per-page":t.perPage},on:{change:t.onPageChange},model:{value:t.currentPage,callback:function(n){t.currentPage=n},expression:"currentPage"}})],1)},[],!1,null,null,null);n.default=component.exports}}]);