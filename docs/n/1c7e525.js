(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{229:function(t,e,r){var content=r(237);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(48).default)("7055aee1",content,!0,{sourceMap:!1})},233:function(t,e,r){"use strict";r(9);var n={name:"SearchTokenId",props:{routeName:{type:String,default:function(){return""}},input:{type:String,default:function(){return""}}},data:function(){return{inputTokenId:""}},watch:{input:{handler:function(t){this.inputTokenId=t}}},methods:{click:function(){var t=Number(this.inputTokenId);this.$emit("click",t)}}},o=r(30),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-input-group",[r("b-form-input",{attrs:{name:"inputTokenId",type:"number",placeholder:"ID"},model:{value:t.inputTokenId,callback:function(e){t.inputTokenId=e},expression:"inputTokenId"}}),r("b-input-group-append",[r("b-button",{attrs:{text:"Go",variant:"primary"},on:{click:t.click}},[t._v("Go")])],1)],1)}),[],!1,null,"56fe0d13",null);e.a=component.exports},236:function(t,e,r){"use strict";var n=r(229);r.n(n).a},237:function(t,e,r){(e=r(47)(!1)).push([t.i,"#chart[data-v-0326021f]{overflow-y:hidden;overflow-x:auto;cursor:all-scroll}#family-tree-chart[data-v-0326021f] .myNodeClass>div{border:2px solid #b5d9ea;text-align:center;position:relative}#family-tree-chart[data-v-0326021f] .mySelectedNodeClass>div{border:2px solid #e3ca4b;text-align:center;background-color:#fff7ae;position:relative}#family-tree-chart[data-v-0326021f] .token-title{position:absolute;top:0;left:0;right:0}#family-tree-chart[data-v-0326021f] .token-image{width:100px;transform:scale(1.5);cursor:pointer}",""]),t.exports=e},244:function(t,e,r){"use strict";r.r(e);r(17),r(18),r(1),r(9),r(42);var n=r(13),o=(r(11),r(233)),c=r(234),l=r(235),d={name:"Tree",components:{SearchTokenId:o.a,GChart:c.GChart},data:function(){var t=this;return{inputTokenId:"",progressText:"",chartData:null,chartEvents:{select:function(){if(null!==t.chartData){var e=t.chart.getSelection();if(e){var r=e[0].row,n=t.chartData.getValue(r,0).split("-")[1];t.inputTokenId=n}}}},chartOptions:{allowHtml:!0,nodeClass:"myNodeClass",selectedNodeClass:"mySelectedNodeClass"},chart:null,google:null,scrollBooster:null}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,n=t.params,e.next=3,r.dispatch("doUpdateTotalSupplyIfNotSet");case 3:return o=n.id?"0"===n.id?r.getters.totalSupply:n.id:r.getters.totalSupply,e.abrupt("return",{tokenId:o});case 5:case"end":return e.stop()}}),e)})))()},methods:{getEntityFromTokenId:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.$get("/tons/".concat(t));case 2:return n=r.sent,r.abrupt("return",{id:Number(t),tokenId:Number(t),breederId:n.breederId,seederId:n.seederId,generation:n.generation});case 4:case"end":return r.stop()}}),r)})))()},onChartReady:function(t,e){t.clearChart=function(){console.log("clear chart")},this.chart=t,this.google=e,this.reDrawChart()},reDrawChart:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,o,data,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.clearScrollBooster(),r=function(){return Math.floor(Math.random()*Math.floor(1e4)).toString()},o=function(e){return'<div><div class="token-title">'.concat(e,'</div><img src="').concat(t.$tonImg(e),'" class="token-image"></div>')},console.log("drawing start"),(data=new t.google.visualization.DataTable).addColumn("string","Name"),data.addColumn("string","Manager"),data.addColumn("string","ToolTip"),e.next=10,t.$store.state.totalSupply;case 10:return c=e.sent,l=0===t.tokenId?c:t.tokenId,t.progressText="drawing ".concat(l,"..."),d=0,f=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(n,c,l){var h,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.progressText="getting ".concat(n,"..."),h=r(),m=r(),e.next=5,t.getEntityFromTokenId(n);case 5:if(0===(v=e.sent).generation){e.next=17;break}if(data.addRows([[{v:"".concat(h,"-").concat(v.breederId),f:o(v.breederId)},"".concat(l,"-").concat(v.tokenId),"#".concat(v.breederId)],[{v:"".concat(m,"-").concat(v.seederId),f:o(v.seederId)},"".concat(l,"-").concat(v.tokenId),"#".concat(v.seederId)]]),t.chart.draw(data,t.chartOptions),!(c<4)){e.next=14;break}return e.next=12,f(v.breederId,c+1,h);case 12:return e.next=14,f(v.seederId,c+1,m);case 14:d<c+1&&(d=c+1),e.next=18;break;case 17:d<c&&(d=c);case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),data.addRows([[{v:"0-".concat(l),f:o(l)},"","#".concat(l)]]),t.chart.draw(data,t.chartOptions),e.next=19,f(l,1,"0");case 19:t.progressText="",t.chartData=data,t.updateScrollBooster();case 22:case"end":return e.stop()}}),e)})))()},clearScrollBooster:function(){null!==this.scrollBooster&&this.scrollBooster.destroy()},updateScrollBooster:function(){var t=document.querySelector("#chart"),content=t.querySelector("#family-tree-chart");this.scrollBooster=new l.a({viewport:t,content:content,mode:"x",onUpdate:function(data){t.scrollLeft=data.position.x}})},onClickSearch:function(t){this.$router.push({name:"familytree-id",params:{id:t}})}}},f=(r(236),r(30)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("section",{staticClass:"container"},[r("h1",{staticClass:"display-3 mb-4"},[r("nuxt-link",{staticClass:"text-decoration-none",attrs:{to:"/familytree/0"}},[t._v("Family Tree")])],1),r("section",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6 offset-sm-6"},[r("SearchTokenId",{attrs:{input:t.inputTokenId},on:{click:t.onClickSearch}})],1)]),r("section",[r("p",[t._v(t._s(t.progressText))])])]),r("section",{staticClass:"container-fulid",attrs:{id:"chart"}},[r("GChart",{attrs:{id:"family-tree-chart",settings:{packages:["orgchart"]},events:t.chartEvents,options:t.chartOptions,data:t.chartData,type:"OrgChart"},on:{ready:t.onChartReady}})],1)])}),[],!1,null,"0326021f",null);e.default=component.exports}}]);